"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getNgPackagrInstance = getNgPackagrInstance;
const ng_packagr_1 = require("ng-packagr");
const angular_version_utils_1 = require("../../utilities/angular-version-utils");
async function getNgPackagrInstance() {
    const { major: angularMajorVersion } = (0, angular_version_utils_1.getInstalledAngularVersionInfo)();
    if (angularMajorVersion >= 19) {
        const { STYLESHEET_PROCESSOR } = await import('../../utilities/ng-packagr/stylesheet-processor.di.js');
        const packagr = (0, ng_packagr_1.ngPackagr)();
        packagr.withProviders([STYLESHEET_PROCESSOR]);
        return packagr;
    }
    const { WRITE_BUNDLES_TRANSFORM } = await import('./pre-v19/ng-package/entry-point/write-bundles.di.js');
    const { WRITE_PACKAGE_TRANSFORM } = await import('./pre-v19/ng-package/entry-point/write-package.di.js');
    const { STYLESHEET_PROCESSOR } = await import('../../utilities/ng-packagr/stylesheet-processor.di.js');
    const packagr = (0, ng_packagr_1.ngPackagr)();
    packagr.withProviders([
        WRITE_BUNDLES_TRANSFORM,
        WRITE_PACKAGE_TRANSFORM,
        STYLESHEET_PROCESSOR,
    ]);
    return packagr;
}
